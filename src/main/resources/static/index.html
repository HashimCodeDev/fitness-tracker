<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Tracker Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

<h1 class="text-3xl font-bold mb-8 text-indigo-600">ðŸ’ª Fitness Tracker Dashboard</h1>

<!-- USERS SECTION -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl">
    <div class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Add User</h2>
        <form id="userForm" class="space-y-3">
            <input type="text" id="userName" placeholder="Name" required
                   class="w-full p-2 border rounded-md focus:ring-2 focus:ring-indigo-400"/>
            <input type="email" id="userEmail" placeholder="Email" required
                   class="w-full p-2 border rounded-md focus:ring-2 focus:ring-indigo-400"/>
            <input type="number" step="0.1" id="userBmi" placeholder="BMI" required
                   class="w-full p-2 border rounded-md focus:ring-2 focus:ring-indigo-400"/>
            <button class="w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition">
                âž• Add User
            </button>
        </form>
    </div>

    <div class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Users</h2>
        <ul id="userList" class="divide-y divide-gray-200"></ul>
    </div>
</div>

<!-- WORKOUTS SECTION -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl mt-8">
    <div class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Add Workout</h2>
        <form id="workoutForm" class="space-y-3">
            <input type="text" id="workoutName" placeholder="Workout Name" required
                   class="w-full p-2 border rounded-md focus:ring-2 focus:ring-green-400"/>
            <textarea id="workoutDesc" placeholder="Description" required
                      class="w-full p-2 border rounded-md focus:ring-2 focus:ring-green-400"></textarea>
            <input type="number" id="workoutDuration" placeholder="Duration (mins)" required
                   class="w-full p-2 border rounded-md focus:ring-2 focus:ring-green-400"/>
            <button class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700 transition">
                âž• Add Workout
            </button>
        </form>
    </div>

    <div class="bg-white shadow rounded-xl p-6">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Workouts</h2>
        <ul id="workoutList" class="divide-y divide-gray-200"></ul>
    </div>
</div>

<script>
    const API_BASE = "http://localhost:8080/api";

    // Load Users
    async function loadUsers() {
        const res = await fetch(`${API_BASE}/users`);
        const users = await res.json();
        const list = document.getElementById("userList");
        list.innerHTML = "";
        users.forEach(u => {
            const li = document.createElement("li");
            li.className = "py-2 flex justify-between items-center";
            li.innerHTML = `<span>${u.name} (${u.email}) | BMI: ${u.bmi}</span>`;
            list.appendChild(li);
        });
    }

    // Load Workouts
    async function loadWorkouts() {
        const res = await fetch(`${API_BASE}/workouts`);
        const workouts = await res.json();
        const list = document.getElementById("workoutList");
        list.innerHTML = "";
        workouts.forEach(w => {
            const li = document.createElement("li");
            li.className = "py-2 flex justify-between items-center";
            li.innerHTML = `<span>${w.name} - ${w.description} (${w.duration} min)</span>`;
            list.appendChild(li);
        });
    }

    // Add User
    document.getElementById("userForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const user = {
            name: document.getElementById("userName").value,
            email: document.getElementById("userEmail").value,
            bmi: parseFloat(document.getElementById("userBmi").value)
        };
        await fetch(`${API_BASE}/users`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(user)
        });
        e.target.reset();
        loadUsers();
    });

    // Add Workout
    document.getElementById("workoutForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const workout = {
            name: document.getElementById("workoutName").value,
            description: document.getElementById("workoutDesc").value,
            duration: parseInt(document.getElementById("workoutDuration").value)
        };
        await fetch(`${API_BASE}/workouts`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(workout)
        });
        e.target.reset();
        loadWorkouts();
    });

    // Initial Load
    loadUsers();
    loadWorkouts();
</script>

</body>
</html>

